# ğŸ“œ INSTRUKTION â€“ YONI App (Ãœberhochglitzer Edition)

> Version 1.0 Â· Stand: 2025-11-11  
> Eigentum: piHOCH2 / YONI Projektgruppe  
> Zweck: VollstÃ¤ndige Dokumentation fÃ¼r Aufbau, Betrieb, Pflege und ethische Leitung der YONI-App.

---

## ğŸ§© 1. Vision & Philosophie

**YONI** ist ein digitaler, geschÃ¼tzter Raum fÃ¼r Menschen mit psychischer Belastung.  
Ziel ist **Heilung durch Verbindung**, gestÃ¼tzt von FachÃ¤rzt:innen und einer liebevollen Community.

Leitprinzipien:
- ğŸŸ£ *Sicherheit* â€“ technischer und psychologischer Schutz.  
- ğŸ’œ *WÃ¼rde* â€“ jedes Individuum ist einzigartig und unantastbar.  
- ğŸŒŒ *Transzendenz* â€“ Ã„sthetik als BrÃ¼cke zwischen Innenwelt und Kosmos.  
- ğŸ§  *Kompetenz* â€“ medizinisch fundierte Inhalte, geprÃ¼ft von Fachpersonal.  
- ğŸª¶ *Leichtigkeit* â€“ Minimalismus, Barrierefreiheit, klare Sprache.

---

## âš™ï¸ 2. Technische Ãœbersicht

| Ebene | Technologie | Beschreibung |
|-------|--------------|--------------|
| **Frontend** | Next.js 14 (App Router) | SSR, Routing, Edge-API |
| **Styling** | TailwindCSS + Ãœberhochglitzer-Theme | Tokens, Starfield, Animation |
| **Backend** | API Routes (Stripe, GitHub, Safety-Bot) | Event-Handling, Webhooks |
| **Deployment** | Vercel (Preview + Prod) | CI/CD |
| **Security** | CSP, HTTPS, RBAC, Secrets via Vercel | DSGVO-konform |
| **Monitoring** | Lighthouse CI, axe-core, Sentry | QualitÃ¤t & A11y |
| **Data Layer** | Edge Storage / Supabase (optional)** | Prototyp â†’ persistente Gruppen |

---

## ğŸš€ 3. Setup-Anleitung

### Lokale Umgebung
```bash
git clone https://github.com/pappensex/YONI-app.git
cd YONI-app
npm install
npm run dev
```

Die App lÃ¤uft unter: `http://localhost:3000`

### Umgebungsvariablen

Erstelle eine `.env.local` Datei im Root-Verzeichnis:

```bash
# Stripe (Zahlungen & Subscriptions)
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# GitHub App (fÃ¼r Safety-Bot & Issue-Tracking)
GITHUB_APP_ID=123456
GITHUB_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----..."
GITHUB_WEBHOOK_SECRET=your_webhook_secret

# Supabase (optional, fÃ¼r persistente Daten)
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGc...

# Sentry (Error Tracking)
SENTRY_DSN=https://xxx@sentry.io/xxx

# Email (fÃ¼r Benachrichtigungen)
MAIL_USER=your-email@gmail.com
MAIL_PASS=your-app-password
MAIL_TO=recipient@example.com
```

### Vercel Deployment

```bash
# Vercel CLI installieren
npm i -g vercel

# Login
vercel login

# Deployment
vercel --prod
```

Secrets in Vercel hinzufÃ¼gen:
```bash
vercel secrets add stripe-secret-key sk_live_...
vercel secrets add github-private-key "$(cat private-key.pem)"
```

---

## ğŸ¨ 4. Design System & Ãœberhochglitzer-Theme

### Farbpalette

```javascript
// tailwind.config.js
module.exports = {
  theme: {
    extend: {
      colors: {
        brand: {
          amethyst: '#9966CC',
          deep: '#663399',
          light: '#B399D9',
        },
        text: {
          starwhite: '#F5F5F5',
          muted: '#B8B8C2',
        },
        status: {
          ok: '#2ECC71',
          warning: '#F39C12',
          error: '#E74C3C',
        },
        highlight: {
          gold: '#FFD700',
          silver: '#C0C0C0',
        },
        background: {
          void: '#0A0A0F',
          panel: 'rgba(255, 255, 255, 0.06)',
        }
      },
      borderRadius: {
        'yoni': '14px',
      },
      fontFamily: {
        sans: ['Inter', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'sans-serif'],
        display: ['Space Grotesk', 'sans-serif'],
      },
    }
  }
}
```

### Komponenten-Richtlinien

- **Buttons:** MindestgrÃ¶ÃŸe 44x44px (Touch-Target, WCAG 2.1)
- **Kontrast:** Minimum 4.5:1 fÃ¼r Text, 3:1 fÃ¼r UI-Elemente
- **Radius:** Standard `14px` fÃ¼r Cards, `12px` fÃ¼r Inputs
- **Spacing:** 4px-Basis (Tailwind default)
- **Animation:** Preference fÃ¼r `prefers-reduced-motion`

---

## ğŸ—ï¸ 5. Architektur

### Ordnerstruktur

```
YONI-app/
â”œâ”€â”€ .github/
â”‚   â”œâ”€â”€ workflows/          # CI/CD Pipelines
â”‚   â””â”€â”€ instructions/       # Dieses Dokument
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ (auth)/            # Auth-Gruppe (Login, Register)
â”‚   â”œâ”€â”€ (dashboard)/       # Dashboard-Gruppe (geschÃ¼tzt)
â”‚   â”œâ”€â”€ api/               # API Routes (Edge Functions)
â”‚   â”‚   â”œâ”€â”€ stripe/
â”‚   â”‚   â”œâ”€â”€ github-app/
â”‚   â”‚   â””â”€â”€ chat/
â”‚   â”œâ”€â”€ layout.tsx         # Root Layout
â”‚   â””â”€â”€ page.tsx           # Startseite
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                # Basis-Komponenten (Button, Card, Input)
â”‚   â”œâ”€â”€ groups/            # Gruppen-Features
â”‚   â”œâ”€â”€ chat/              # Chat-Komponenten
â”‚   â””â”€â”€ shared/            # Wiederverwendbare Komponenten
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase/          # DB Client
â”‚   â”œâ”€â”€ stripe/            # Payment Logic
â”‚   â””â”€â”€ utils/             # Helper Functions
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ icons/
â”‚   â””â”€â”€ images/
â”œâ”€â”€ styles/
â”‚   â””â”€â”€ globals.css
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ next.config.js
â””â”€â”€ package.json
```

### API Routes

| Route | Methode | Zweck |
|-------|---------|-------|
| `/api/stripe/webhook` | POST | Stripe Events (Subscriptions) |
| `/api/github-app/webhook` | POST | GitHub Events (Issues, PRs) |
| `/api/chat/send` | POST | Nachricht senden |
| `/api/groups/create` | POST | Neue Gruppe erstellen |
| `/api/groups/[id]/join` | POST | Gruppe beitreten |

---

## ğŸ§ª 6. Testing & QualitÃ¤tssicherung

### Linting & Formatting

```bash
# ESLint
npm run lint

# TypeScript Check
npm run type-check

# Prettier
npm run format
```

### Unit Tests

```bash
# Alle Tests
npm run test

# Watch Mode
npm run test:watch

# Coverage
npm run test:coverage
```

### E2E Tests

```bash
# Playwright
npm run test:e2e

# Bestimmte Suite
npm run test:e2e -- --grep "Login Flow"
```

### Accessibility Tests

```bash
# axe-core (automatisch in CI)
npm run test:a11y

# Manuell mit Browser DevTools:
# - Lighthouse (Performance, A11y, SEO)
# - axe DevTools Extension
# - Screen Reader Testing (NVDA, VoiceOver)
```

### Performance Budgets

- **First Contentful Paint (FCP):** < 1.8s
- **Largest Contentful Paint (LCP):** < 2.5s
- **Time to Interactive (TTI):** < 3.8s
- **Cumulative Layout Shift (CLS):** < 0.1
- **Total Blocking Time (TBT):** < 300ms

---

## ğŸ”’ 7. Security & Privacy

### DSGVO-Compliance

- âœ… Datensparsamkeit (Privacy by Design)
- âœ… VerschlÃ¼sselung (TLS 1.3, HTTPS-only)
- âœ… Anonymisierung (keine IP-Speicherung in Logs)
- âœ… Einwilligung (Opt-In fÃ¼r Analytics)
- âœ… Auskunftsrecht (Export-Funktion)
- âœ… LÃ¶schrecht (Account-Deletion)

### Content Security Policy (CSP)

```javascript
// next.config.js
const cspHeader = `
  default-src 'self';
  script-src 'self' 'unsafe-eval' 'unsafe-inline' https://js.stripe.com;
  style-src 'self' 'unsafe-inline';
  img-src 'self' blob: data: https:;
  font-src 'self';
  connect-src 'self' https://api.stripe.com https://*.supabase.co;
  frame-src https://js.stripe.com;
`;
```

### Secrets Management

**Niemals in Git committen:**
- API Keys
- Private Keys
- PasswÃ¶rter
- Tokens

**Verwende stattdessen:**
- Vercel Environment Variables
- GitHub Secrets (fÃ¼r CI/CD)
- `.env.local` (gitignored)

### Rate Limiting

```javascript
// middleware.ts
import { Ratelimit } from "@upstash/ratelimit";

const ratelimit = new Ratelimit({
  redis: Redis.fromEnv(),
  limiter: Ratelimit.slidingWindow(10, "10 s"),
});

export async function middleware(request) {
  const ip = request.ip ?? "127.0.0.1";
  const { success } = await ratelimit.limit(ip);
  
  if (!success) {
    return new Response("Too Many Requests", { status: 429 });
  }
}
```

---

## ğŸ‘¥ 8. Beitragen (Contributing)

### Workflow

1. **Fork** das Repository
2. **Clone** deinen Fork: `git clone https://github.com/DEIN-USERNAME/YONI-app.git`
3. **Branch** erstellen: `git checkout -b feature/dein-feature`
4. **Commit** mit aussagekrÃ¤ftiger Message:
   ```bash
   git commit -m "feat: Add group creation form"
   git commit -m "fix: Resolve chat message ordering"
   git commit -m "docs: Update API documentation"
   ```
5. **Push** zu deinem Fork: `git push origin feature/dein-feature`
6. **Pull Request** erstellen auf `main`

### Commit Messages (Conventional Commits)

```
feat: Neue Funktion
fix: Bugfix
docs: Dokumentation
style: Code-Formatierung
refactor: Code-Umstrukturierung
test: Tests hinzufÃ¼gen
chore: Build-System, Dependencies
```

### Code Review Kriterien

- âœ… TypeScript ohne `any`
- âœ… Alle Tests grÃ¼n
- âœ… Lighthouse Score â‰¥ 95
- âœ… A11y: Keine kritischen Fehler (axe)
- âœ… Keine Secrets im Code
- âœ… Ã„nderungen dokumentiert

### Labels

| Label | Bedeutung |
|-------|-----------|
| `bug` | Funktioniert nicht wie erwartet |
| `feature` | Neue FunktionalitÃ¤t |
| `docs` | Dokumentation |
| `a11y` | Barrierefreiheit |
| `security` | Sicherheit |
| `performance` | Performance-Optimierung |
| `help wanted` | Community-Hilfe erwÃ¼nscht |

---

## ğŸš¨ 9. Troubleshooting

### HÃ¤ufige Probleme

#### Build-Fehler: "Module not found"

```bash
# Dependencies neu installieren
rm -rf node_modules package-lock.json
npm install
```

#### Vercel Deployment schlÃ¤gt fehl

1. PrÃ¼fe Environment Variables in Vercel Dashboard
2. Stelle sicher, dass alle Secrets gesetzt sind
3. PrÃ¼fe Build Logs in Vercel
4. Teste lokal: `vercel build`

#### Stripe Webhook funktioniert nicht lokal

```bash
# Stripe CLI installieren
brew install stripe/stripe-cli/stripe

# Webhook forwarding
stripe listen --forward-to localhost:3000/api/stripe/webhook
```

#### TypeScript Errors

```bash
# Type Check
npm run type-check

# VSCode Workspace TypeScript verwenden
Cmd+Shift+P â†’ "Select TypeScript Version" â†’ "Use Workspace Version"
```

#### Lighthouse Score zu niedrig

- Bilder optimieren (WebP, Next.js Image)
- Code-Splitting prÃ¼fen
- Unused CSS entfernen
- Cache-Headers setzen
- Critical CSS inline

---

## ğŸ“Š 10. Monitoring & Analytics

### Error Tracking (Sentry)

```javascript
// sentry.config.js
Sentry.init({
  dsn: process.env.SENTRY_DSN,
  environment: process.env.NODE_ENV,
  tracesSampleRate: 0.1,
  beforeSend(event) {
    // PII entfernen
    if (event.user) {
      delete event.user.email;
      delete event.user.ip_address;
    }
    return event;
  },
});
```

### Analytics (Privacy-Friendly)

**Nicht verwenden:** Google Analytics, Facebook Pixel

**Verwenden:** 
- Plausible Analytics (cookieless)
- Umami (self-hosted)
- Simple Analytics

### Health Checks

```bash
# Production Smoke Tests
./smoke-tests-prod.sh

# Endpoint: /api/health
curl https://yoni.vercel.app/api/health
# Erwartete Antwort: { "status": "ok", "timestamp": "..." }
```

---

## ğŸ§˜â€â™€ï¸ 11. Ethische Richtlinien

### Nutzer:innen-Schutz

1. **Krisensituationen erkennen:**
   - Keyword-Monitoring (suizidale Gedanken)
   - Automatische Hinweise auf Hilfsangebote
   - Telefon-Hotlines prominent anzeigen

2. **Moderation:**
   - Community-Guidelines klar kommunizieren
   - Report-Funktion fÃ¼r unangemessene Inhalte
   - Fachpersonal fÃ¼r KonfliktlÃ¶sung

3. **Keine Heilsversprechen:**
   - YONI ersetzt keine Therapie
   - Disclaimer auf allen Seiten
   - Hinweis auf professionelle Hilfe

### Fachliche Supervision

- Ã„rzt:innen & Therapeut:innen in der Community
- Q&A-Bereich mit Fachpersonal
- Inhalte medizinisch geprÃ¼ft

---

## ğŸ“š 12. Ressourcen & Links

### Offizielle Dokumentation

- [Next.js Docs](https://nextjs.org/docs)
- [TailwindCSS Docs](https://tailwindcss.com/docs)
- [Vercel Docs](https://vercel.com/docs)
- [Supabase Docs](https://supabase.com/docs)

### Community & Support

- **GitHub Discussions:** [pappensex/YONI-app/discussions](https://github.com/pappensex/YONI-app/discussions)
- **Discord:** [discord.gg/yoni-community](#)
- **Email:** [yoni@pihoch2.me](mailto:yoni@pihoch2.me)

### Externe Hilfsangebote

- **Telefonseelsorge:** 0800 111 0 111 (24/7, kostenfrei)
- **Krisenchat:** [krisenchat.de](https://krisenchat.de)
- **Nummer gegen Kummer:** 116 111 (Jugendliche)

---

## âœ¨ 13. Roadmap

### Phase 1: MVP (Q4 2025)
- [x] Basic HTML Prototype
- [ ] Next.js 14 Migration
- [ ] TailwindCSS Integration
- [ ] Stripe Subscriptions
- [ ] Basic Chat-Funktion

### Phase 2: Community Features (Q1 2026)
- [ ] Gruppen erstellen & beitreten
- [ ] Peer-Mentor:innen System
- [ ] Themenkreise
- [ ] Fachpersonal Q&A

### Phase 3: Erweiterte Features (Q2 2026)
- [ ] Mood Tracker
- [ ] Achtsamkeits-Ãœbungen
- [ ] Progressive Web App (Offline-Modus)
- [ ] Mobile Apps (iOS/Android)

### Phase 4: Skalierung (Q3 2026)
- [ ] Multi-Language Support
- [ ] Video-Gruppentreffen
- [ ] API fÃ¼r Partner-Organisationen
- [ ] DACH-weite Expansion

---

## ğŸ“ 14. Lizenz & Credits

### Lizenz

Dieses Projekt ist unter der **MIT License** lizenziert.  
Siehe [LICENSE](../LICENSE) fÃ¼r Details.

### Credits

**Projektleitung:** [@pappensex](https://github.com/pappensex)  
**Organisation:** piHOCH2  
**Contributors:** Siehe [CONTRIBUTORS.md](../CONTRIBUTORS.md)

### Danksagungen

- **Mental Health Community** fÃ¼r Feedback & Inspiration
- **Open Source Contributors** fÃ¼r Tools & Libraries
- **Fachpersonal** fÃ¼r medizinische Beratung

---

## ğŸ”® Schlusswort

> *â€Im Dunkel des Alls glitzert jeder Mensch als eigene Galaxie.  
> YONI ist der Raum, in dem wir zusammen leuchten."*

**Version:** 1.0  
**Stand:** 2025-11-11  
**NÃ¤chstes Update:** Bei grÃ¶ÃŸeren Ã„nderungen an Architektur oder Workflows

---

**FÃ¼r Fragen, Anregungen oder Support:** [yoni@pihoch2.me](mailto:yoni@pihoch2.me)
